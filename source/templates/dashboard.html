{% extends "base.html" %}

{% block content%}
<div class="container-xxl">
    <div class="row row-cols-4">
        <div class="col-sm">

            <h2>TO DO</h2>
            {% for task in dashboard %}

            {% if task.status == "Открыта" %}
                <div class="border border-5">
                    <p>{{ task.title }}</p>
                    <p>Исполнитель {{ task.assigned_to_first_name }} {{ task.assigned_to_last_name }}</p>
                    <p>Дата создания {{ task.published}}</p>
                        <div class="dropdown">
                            <a class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                                Изменить статус
                            </a>

                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Открыта') }}">Открыта</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='В процессе') }}">В процессе</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Выполнена') }}">Выполнена</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Закрыта') }}">Закрыта</a></li>
                            </ul>
                        </div>
                </div>
            {% endif %}
            {% endfor %}

        </div>
        <div class="col-sm">
            <h2>IN PROGRESS</h2>

            {% for task in dashboard %}

            {% if task.status == "В процессе" %}
                <div class="border border-5">
                <p>{{ task.title }}</p>
                <p>Исполнитель {{ task.assigned_to_first_name }} {{ task.assigned_to_last_name }}</p>
                <p>Дата создания {{ task.published}}</p>
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                            Изменить статус
                        </a>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Открыта') }}">Открыта</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='В процессе') }}">В процессе</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Выполнена') }}">Выполнена</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Закрыта') }}">Закрыта</a></li>
                        </ul>
                    </div>
                </div>
            {% endif %}

            {% endfor %}

        </div>
        <div class="col-sm">
            <h2>DONE</h2>
            {% for task in dashboard %}
            {% if task.status == "Выполнена" %}
                <div class="border border-5">
                <p>{{ task.title }}</p>
                <p>Исполнитель {{ task.assigned_to_first_name }} {{ task.assigned_to_last_name }}</p>
                <p>Дата создания {{ task.published}}</p>
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                            Изменить статус
                        </a>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Открыта') }}">Открыта</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='В процессе') }}">В процессе</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Выполнена') }}">Выполнена</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Закрыта') }}">Закрыта</a></li>
                        </ul>
                    </div>
                </div>
            {% endif %}
            {% endfor %}
        </div>
        <div class="col-sm">
            <h2>CLOSED</h2>
            {% for task in dashboard %}
            {% if task.status == "Закрыта" %}
                <div class="border border-5">
                <p>{{ task.title }}</p>
                <p>Исполнитель {{ task.assigned_to_first_name }} {{ task.assigned_to_last_name }}</p>
                <p>Дата создания {{ task.published}}</p>
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                            Изменить статус
                        </a>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Открыта') }}">Открыта</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='В процессе') }}">В процессе</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Выполнена') }}">Выполнена</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('dashboard.change_status', task_id=task.id, task_status='Закрыта') }}">Закрыта</a></li>
                        </ul>
                    </div>
                </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}